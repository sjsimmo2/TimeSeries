<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 3 Exponential Smoothing | Time Series 1</title>
  <meta name="description" content="Chapter 3 Exponential Smoothing | Time Series 1" />
  <meta name="generator" content="bookdown 0.34 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 3 Exponential Smoothing | Time Series 1" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 3 Exponential Smoothing | Time Series 1" />
  
  
  

<meta name="author" content="by Dr. Susan Simmons" />


<meta name="date" content="2023-09-07" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="introduction.html"/>
<link rel="next" href="arima.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">TimeSeries</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Time series 1</a></li>
<li class="chapter" data-level="2" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>2</b> Introduction</a>
<ul>
<li class="chapter" data-level="2.1" data-path="introduction.html"><a href="introduction.html#time-series-decomposition"><i class="fa fa-check"></i><b>2.1</b> Time series decomposition</a></li>
<li class="chapter" data-level="2.2" data-path="introduction.html"><a href="introduction.html#python-code-and-results-for-time-series-plot"><i class="fa fa-check"></i><b>2.2</b> Python code and results for Time Series plot</a></li>
<li class="chapter" data-level="2.3" data-path="introduction.html"><a href="introduction.html#sas-code-for-time-series-plot-and-decomposition"><i class="fa fa-check"></i><b>2.3</b> SAS code for time series plot and decomposition</a></li>
<li class="chapter" data-level="2.4" data-path="introduction.html"><a href="introduction.html#self-study"><i class="fa fa-check"></i><b>2.4</b> Self-study</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="exponential-smoothing.html"><a href="exponential-smoothing.html"><i class="fa fa-check"></i><b>3</b> Exponential Smoothing</a>
<ul>
<li class="chapter" data-level="3.1" data-path="exponential-smoothing.html"><a href="exponential-smoothing.html#simple-exponential-smoothing"><i class="fa fa-check"></i><b>3.1</b> Simple Exponential Smoothing</a></li>
<li class="chapter" data-level="3.2" data-path="exponential-smoothing.html"><a href="exponential-smoothing.html#holt-esm"><i class="fa fa-check"></i><b>3.2</b> Holt ESM</a></li>
<li class="chapter" data-level="3.3" data-path="exponential-smoothing.html"><a href="exponential-smoothing.html#holt-winters"><i class="fa fa-check"></i><b>3.3</b> Holt-Winters</a></li>
<li class="chapter" data-level="3.4" data-path="exponential-smoothing.html"><a href="exponential-smoothing.html#evaluating-forecasts"><i class="fa fa-check"></i><b>3.4</b> Evaluating forecasts</a></li>
<li class="chapter" data-level="3.5" data-path="exponential-smoothing.html"><a href="exponential-smoothing.html#ets"><i class="fa fa-check"></i><b>3.5</b> ETS</a></li>
<li class="chapter" data-level="3.6" data-path="exponential-smoothing.html"><a href="exponential-smoothing.html#python-code-for-exponential-smoothing"><i class="fa fa-check"></i><b>3.6</b> Python Code for Exponential Smoothing</a></li>
<li class="chapter" data-level="3.7" data-path="exponential-smoothing.html"><a href="exponential-smoothing.html#sas-code-for-exponential-smoothing-models"><i class="fa fa-check"></i><b>3.7</b> SAS Code for Exponential Smoothing Models</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="arima.html"><a href="arima.html"><i class="fa fa-check"></i><b>4</b> ARIMA</a>
<ul>
<li class="chapter" data-level="4.1" data-path="arima.html"><a href="arima.html#stationarity"><i class="fa fa-check"></i><b>4.1</b> Stationarity</a></li>
<li class="chapter" data-level="4.2" data-path="arima.html"><a href="arima.html#correlation-functions"><i class="fa fa-check"></i><b>4.2</b> Correlation Functions</a></li>
<li class="chapter" data-level="4.3" data-path="arima.html"><a href="arima.html#autoregressive-models-ar"><i class="fa fa-check"></i><b>4.3</b> AutoRegressive Models (AR)</a></li>
<li class="chapter" data-level="4.4" data-path="arima.html"><a href="arima.html#moving-average-model-ma"><i class="fa fa-check"></i><b>4.4</b> Moving Average model (MA)</a></li>
<li class="chapter" data-level="4.5" data-path="arima.html"><a href="arima.html#white-noise"><i class="fa fa-check"></i><b>4.5</b> White noise</a></li>
<li class="chapter" data-level="4.6" data-path="arima.html"><a href="arima.html#trending-series"><i class="fa fa-check"></i><b>4.6</b> Trending Series</a></li>
<li class="chapter" data-level="4.7" data-path="arima.html"><a href="arima.html#fitting-arima-models"><i class="fa fa-check"></i><b>4.7</b> Fitting ARIMA models</a></li>
<li class="chapter" data-level="4.8" data-path="arima.html"><a href="arima.html#python-code-for-armaarima-models"><i class="fa fa-check"></i><b>4.8</b> Python Code for ARMA/ARIMA models</a></li>
<li class="chapter" data-level="4.9" data-path="arima.html"><a href="arima.html#sas-code-for-armaarima"><i class="fa fa-check"></i><b>4.9</b> SAS Code for ARMA/ARIMA</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="seasonality.html"><a href="seasonality.html"><i class="fa fa-check"></i><b>5</b> Seasonality</a>
<ul>
<li class="chapter" data-level="5.1" data-path="seasonality.html"><a href="seasonality.html#seasonal-unit-root-testing"><i class="fa fa-check"></i><b>5.1</b> Seasonal Unit Root Testing</a></li>
<li class="chapter" data-level="5.2" data-path="seasonality.html"><a href="seasonality.html#deterministic-solutions"><i class="fa fa-check"></i><b>5.2</b> Deterministic Solutions</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="seasonality.html"><a href="seasonality.html#seasonal-dummy-variables"><i class="fa fa-check"></i><b>5.2.1</b> Seasonal Dummy Variables</a></li>
<li class="chapter" data-level="5.2.2" data-path="seasonality.html"><a href="seasonality.html#fourier-transforms"><i class="fa fa-check"></i><b>5.2.2</b> Fourier Transforms</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="seasonality.html"><a href="seasonality.html#stochastic-solutions"><i class="fa fa-check"></i><b>5.3</b> Stochastic Solutions</a></li>
<li class="chapter" data-level="5.4" data-path="seasonality.html"><a href="seasonality.html#seasonal-arima-modeling"><i class="fa fa-check"></i><b>5.4</b> Seasonal ARIMA Modeling</a></li>
<li class="chapter" data-level="5.5" data-path="seasonality.html"><a href="seasonality.html#python-code-for-seasonality"><i class="fa fa-check"></i><b>5.5</b> Python Code for Seasonality</a>
<ul>
<li class="chapter" data-level="5.5.1" data-path="seasonality.html"><a href="seasonality.html#seasonality-1"><i class="fa fa-check"></i><b>5.5.1</b> Seasonality</a></li>
<li class="chapter" data-level="5.5.2" data-path="seasonality.html"><a href="seasonality.html#deterministic-solutions-1"><i class="fa fa-check"></i><b>5.5.2</b> Deterministic Solutions</a></li>
<li class="chapter" data-level="5.5.3" data-path="seasonality.html"><a href="seasonality.html#stochastic-solution"><i class="fa fa-check"></i><b>5.5.3</b> Stochastic Solution</a></li>
<li class="chapter" data-level="5.5.4" data-path="seasonality.html"><a href="seasonality.html#seasonal-arima"><i class="fa fa-check"></i><b>5.5.4</b> Seasonal ARIMA</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="dynamic-regression-models.html"><a href="dynamic-regression-models.html"><i class="fa fa-check"></i><b>6</b> Dynamic Regression Models</a>
<ul>
<li class="chapter" data-level="6.1" data-path="dynamic-regression-models.html"><a href="dynamic-regression-models.html#intervention-variables"><i class="fa fa-check"></i><b>6.1</b> Intervention Variables</a></li>
<li class="chapter" data-level="6.2" data-path="dynamic-regression-models.html"><a href="dynamic-regression-models.html#predictor-variables"><i class="fa fa-check"></i><b>6.2</b> Predictor Variables</a></li>
<li class="chapter" data-level="6.3" data-path="dynamic-regression-models.html"><a href="dynamic-regression-models.html#python-code-for-dynamic-regression-models"><i class="fa fa-check"></i><b>6.3</b> Python Code for Dynamic Regression Models</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="dynamic-regression-models.html"><a href="dynamic-regression-models.html#intervention-variables-1"><i class="fa fa-check"></i><b>6.3.1</b> Intervention Variables</a></li>
<li class="chapter" data-level="6.3.2" data-path="dynamic-regression-models.html"><a href="dynamic-regression-models.html#predictor-variables-1"><i class="fa fa-check"></i><b>6.3.2</b> Predictor Variables</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="prophet.html"><a href="prophet.html"><i class="fa fa-check"></i><b>7</b> Prophet</a>
<ul>
<li class="chapter" data-level="7.1" data-path="prophet.html"><a href="prophet.html#python-code-for-prophet"><i class="fa fa-check"></i><b>7.1</b> Python Code for Prophet</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="prophet.html"><a href="prophet.html#model-structure"><i class="fa fa-check"></i><b>7.1.1</b> Model Structure</a></li>
<li class="chapter" data-level="7.1.2" data-path="prophet.html"><a href="prophet.html#forecasting"><i class="fa fa-check"></i><b>7.1.2</b> Forecasting</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="neural-network-model.html"><a href="neural-network-model.html"><i class="fa fa-check"></i><b>8</b> Neural Network Model</a>
<ul>
<li class="chapter" data-level="8.1" data-path="neural-network-model.html"><a href="neural-network-model.html#python-code-for-neural-networks"><i class="fa fa-check"></i><b>8.1</b> Python Code for Neural Networks</a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="neural-network-model.html"><a href="neural-network-model.html#ar-neural-networks"><i class="fa fa-check"></i><b>8.1.1</b> AR Neural Networks</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Time Series 1</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="exponential-smoothing" class="section level1 hasAnchor" number="3">
<h1><span class="header-section-number">Chapter 3</span> Exponential Smoothing<a href="exponential-smoothing.html#exponential-smoothing" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>In R, we are able to do Simple (or Single) Exponential Smoothing Models, Holt Exponential Smoothing Models and Holt-Winters Exponential Smoothing Models. For the first two (Simple and Holt), we will be using the Steel data set and for the last one (Holt-Winters), we will be using the airline data set (we will also use the airline data set to illustrate the damped trend model). Each of these are shown below.</p>
<div id="simple-exponential-smoothing" class="section level2 hasAnchor" number="3.1">
<h2><span class="header-section-number">3.1</span> Simple Exponential Smoothing<a href="exponential-smoothing.html#simple-exponential-smoothing" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>For Simple Exponential Smoothing Models (SES), we have only one component, referred to as the level component.
<span class="math display">\[\hat{Y}_{t+1}= L_{t}\\
  L_{t} = \theta Y_{t} + (1-\theta)L_{t-1}\]</span></p>
<p>This is basically a weighted average with the last observation and the last predicted value. Since this only has a level component, forecasts from SES models will be a horizontal line (hence why this method is called “one-step ahead” forecasting).</p>
<p>In the R code, you can choose how the initial values are selected. If you specify simple, then the first few observations will be used to estimate the starting value. If you select optimal, then the algorithm uses the ets algorithm (will be discussed later) to optimize the starting values and the smoothing parameters. You can also specify the value for “h”, which is the number of forecasts to create (take a look at the forecast…do you see a horizontal line?).</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="exponential-smoothing.html#cb24-1" tabindex="-1"></a><span class="co"># Building a Single Exponential Smoothing (SES) Model - Steel Data #</span></span>
<span id="cb24-2"><a href="exponential-smoothing.html#cb24-2" tabindex="-1"></a>SES.Steel <span class="ot">&lt;-</span> <span class="fu">ses</span>(SteelShp, <span class="at">initial =</span> <span class="st">&quot;simple&quot;</span>, <span class="at">h =</span> <span class="dv">24</span>)</span>
<span id="cb24-3"><a href="exponential-smoothing.html#cb24-3" tabindex="-1"></a><span class="fu">summary</span>(SES.Steel)</span></code></pre></div>
<pre><code>## 
## Forecast method: Simple exponential smoothing
## 
## Model Information:
## Simple exponential smoothing 
## 
## Call:
##  ses(y = SteelShp, h = 24, initial = &quot;simple&quot;) 
## 
##   Smoothing parameters:
##     alpha = 0.4549 
## 
##   Initial states:
##     l = 5980 
## 
##   sigma:  460.4357
## Error measures:
##                    ME     RMSE      MAE        MPE     MAPE
## Training set 11.43866 460.4357 363.9341 -0.2204828 5.708307
##                   MASE        ACF1
## Training set 0.8287599 -0.04379112
## 
## Forecasts:
##          Point Forecast    Lo 80    Hi 80    Lo 95    Hi 95
## Jan 1992       6479.571 5889.499 7069.643 5577.133 7382.008
## Feb 1992       6479.571 5831.305 7127.836 5488.134 7471.007
## Mar 1992       6479.571 5777.922 7181.219 5406.492 7552.649
## Apr 1992       6479.571 5728.323 7230.819 5330.636 7628.505
## May 1992       6479.571 5681.801 7277.340 5259.487 7699.654
## Jun 1992       6479.571 5637.847 7321.295 5192.265 7766.876
## Jul 1992       6479.571 5596.077 7363.065 5128.383 7830.758
## Aug 1992       6479.571 5556.194 7402.947 5067.388 7891.754
## Sep 1992       6479.571 5517.964 7441.177 5008.920 7950.221
## Oct 1992       6479.571 5481.197 7477.944 4952.690 8006.452
## Nov 1992       6479.571 5445.736 7513.405 4898.458 8060.684
## Dec 1992       6479.571 5411.453 7547.689 4846.025 8113.116
## Jan 1993       6479.571 5378.236 7580.906 4795.224 8163.917
## Feb 1993       6479.571 5345.992 7613.150 4745.911 8213.230
## Mar 1993       6479.571 5314.640 7644.502 4697.962 8261.179
## Apr 1993       6479.571 5284.110 7675.032 4651.271 8307.871
## May 1993       6479.571 5254.340 7704.801 4605.742 8353.399
## Jun 1993       6479.571 5225.277 7733.864 4561.294 8397.847
## Jul 1993       6479.571 5196.872 7762.269 4517.853 8441.289
## Aug 1993       6479.571 5169.083 7790.058 4475.353 8483.789
## Sep 1993       6479.571 5141.871 7817.271 4433.735 8525.406
## Oct 1993       6479.571 5115.201 7843.940 4392.948 8566.194
## Nov 1993       6479.571 5089.043 7870.098 4352.942 8606.199
## Dec 1993       6479.571 5063.368 7895.773 4313.676 8645.465</code></pre>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="exponential-smoothing.html#cb26-1" tabindex="-1"></a><span class="co"># Plot the SES model on steel data</span></span>
<span id="cb26-2"><a href="exponential-smoothing.html#cb26-2" tabindex="-1"></a><span class="fu">autoplot</span>(SES.Steel)<span class="sc">+</span></span>
<span id="cb26-3"><a href="exponential-smoothing.html#cb26-3" tabindex="-1"></a>  <span class="fu">autolayer</span>(<span class="fu">fitted</span>(SES.Steel),<span class="at">series=</span><span class="st">&quot;Fitted&quot;</span>)<span class="sc">+</span><span class="fu">ylab</span>(<span class="st">&quot;US Steel Shipments&quot;</span>) <span class="sc">+</span> <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">1992</span>,<span class="at">color=</span><span class="st">&quot;orange&quot;</span>,<span class="at">linetype=</span><span class="st">&quot;dashed&quot;</span>)</span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/ses-1.png" width="672" /></p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="exponential-smoothing.html#cb27-1" tabindex="-1"></a><span class="co"># Computes accuracy statistics for SES model on steel data (training data...NOT validation nor test)</span></span>
<span id="cb27-2"><a href="exponential-smoothing.html#cb27-2" tabindex="-1"></a><span class="fu">round</span>(<span class="fu">accuracy</span>(SES.Steel),<span class="dv">2</span>) </span></code></pre></div>
<pre><code>##                 ME   RMSE    MAE   MPE MAPE MASE  ACF1
## Training set 11.44 460.44 363.93 -0.22 5.71 0.83 -0.04</code></pre>
</div>
<div id="holt-esm" class="section level2 hasAnchor" number="3.2">
<h2><span class="header-section-number">3.2</span> Holt ESM<a href="exponential-smoothing.html#holt-esm" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The Holt model incorporates trend information. So, now there are two components: level and trend. For each component, there will be a smoothing coefficient (or weight). CAREFUL, when you look at parameter estimates, these are NOT the estimates for the mean nor the linear trend…you should be thinking of them as weights (between 0 and 1). The overall form for Holt’s method is:</p>
<p><span class="math display">\[\hat{Y}_{t+h}= L_{t}+hT_{t}\\
  L_{t} = \theta Y_{t} + (1-\theta)(L_{t-1}+T_{t-1})\\
  T_{t} = \gamma (L_{t}-L_{t-1}) + (1-\gamma) T_{t-1}\]</span></p>
<p>For the Holt’s method, when you forecast, you will see a trending line.</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="exponential-smoothing.html#cb29-1" tabindex="-1"></a><span class="co"># Building a Linear Exponential Smoothing Model - Steel Data #</span></span>
<span id="cb29-2"><a href="exponential-smoothing.html#cb29-2" tabindex="-1"></a>LES.Steel <span class="ot">&lt;-</span> <span class="fu">holt</span>(SteelShp, <span class="at">initial =</span> <span class="st">&quot;optimal&quot;</span>, <span class="at">h =</span> <span class="dv">24</span>)</span>
<span id="cb29-3"><a href="exponential-smoothing.html#cb29-3" tabindex="-1"></a><span class="fu">summary</span>(LES.Steel)</span></code></pre></div>
<pre><code>## 
## Forecast method: Holt&#39;s method
## 
## Model Information:
## Holt&#39;s method 
## 
## Call:
##  holt(y = SteelShp, h = 24, initial = &quot;optimal&quot;) 
## 
##   Smoothing parameters:
##     alpha = 0.4329 
##     beta  = 1e-04 
## 
##   Initial states:
##     l = 6678.9989 
##     b = -0.0651 
## 
##   sigma:  471.4322
## 
##      AIC     AICc      BIC 
## 1626.001 1626.667 1638.822 
## 
## Error measures:
##                     ME     RMSE      MAE        MPE     MAPE
## Training set -4.167318 461.5062 369.9177 -0.4760441 5.818476
##                   MASE        ACF1
## Training set 0.8423858 -0.03556298
## 
## Forecasts:
##          Point Forecast    Lo 80    Hi 80    Lo 95    Hi 95
## Jan 1992       6495.463 5891.298 7099.627 5571.472 7419.453
## Feb 1992       6495.357 5836.979 7153.736 5488.455 7502.260
## Mar 1992       6495.252 5786.775 7203.730 5411.729 7578.775
## Apr 1992       6495.147 5739.865 7250.429 5340.043 7650.251
## May 1992       6495.042 5695.672 7294.412 5272.511 7717.573
## Jun 1992       6494.937 5653.768 7336.106 5208.479 7781.395
## Jul 1992       6494.832 5613.826 7375.838 5147.450 7842.214
## Aug 1992       6494.727 5575.592 7413.861 5089.032 7900.421
## Sep 1992       6494.622 5538.862 7450.381 5032.914 7956.330
## Oct 1992       6494.516 5503.468 7485.565 4978.839 8010.194
## Nov 1992       6494.411 5469.273 7519.549 4926.598 8062.225
## Dec 1992       6494.306 5436.161 7552.452 4876.013 8112.600
## Jan 1993       6494.201 5404.033 7584.369 4826.933 8161.470
## Feb 1993       6494.096 5372.805 7615.387 4779.229 8208.963
## Mar 1993       6493.991 5342.404 7645.578 4732.791 8255.191
## Apr 1993       6493.886 5312.767 7675.005 4687.520 8300.252
## May 1993       6493.781 5283.837 7703.725 4643.331 8344.230
## Jun 1993       6493.675 5255.565 7731.786 4600.149 8387.202
## Jul 1993       6493.570 5227.907 7759.234 4557.905 8429.235
## Aug 1993       6493.465 5200.824 7786.106 4516.541 8470.389
## Sep 1993       6493.360 5174.281 7812.439 4476.003 8510.718
## Oct 1993       6493.255 5148.246 7838.264 4436.241 8550.269
## Nov 1993       6493.150 5122.689 7863.611 4397.211 8589.089
## Dec 1993       6493.045 5097.585 7888.504 4358.874 8627.216</code></pre>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="exponential-smoothing.html#cb31-1" tabindex="-1"></a><span class="co"># Plote the LES model on steel data</span></span>
<span id="cb31-2"><a href="exponential-smoothing.html#cb31-2" tabindex="-1"></a></span>
<span id="cb31-3"><a href="exponential-smoothing.html#cb31-3" tabindex="-1"></a><span class="fu">autoplot</span>(LES.Steel)<span class="sc">+</span></span>
<span id="cb31-4"><a href="exponential-smoothing.html#cb31-4" tabindex="-1"></a>  <span class="fu">autolayer</span>(<span class="fu">fitted</span>(LES.Steel),<span class="at">series=</span><span class="st">&quot;Fitted&quot;</span>)<span class="sc">+</span><span class="fu">labs</span>(<span class="at">title=</span><span class="st">&quot;US Steel Shipment with Holt forecasts&quot;</span>,<span class="at">y=</span><span class="st">&quot;US Steel Shipments&quot;</span>) <span class="sc">+</span> <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">1992</span>,<span class="at">color=</span><span class="st">&quot;orange&quot;</span>,<span class="at">linetype=</span><span class="st">&quot;dashed&quot;</span>)</span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/Holt-1.png" width="672" /></p>
<p>We can also perform Holt’s method with a damped trend. You will see the formula for the damped trend is similar to the previous Holt formula with an addition of a dampening parameter.</p>
<p><span class="math display">\[\hat{Y}_{t+h}= L_{t}+\sum_{i}^{k}\phi^{i}T_{t}\\
  L_{t} = \theta Y_{t} + (1-\theta)(L_{t-1}+\phi T_{t-1})\\
  T_{t} = \gamma (L_{t}-L_{t-1}) + (1-\gamma) \phi T_{t-1}\]</span></p>
<p>We will illustrate the damped trend on both the Steel and Airline data sets.</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="exponential-smoothing.html#cb32-1" tabindex="-1"></a>LDES.Steel <span class="ot">&lt;-</span> <span class="fu">holt</span>(SteelShp, <span class="at">initial =</span> <span class="st">&quot;optimal&quot;</span>, <span class="at">h =</span> <span class="dv">24</span>, <span class="at">damped =</span> <span class="cn">TRUE</span>)</span>
<span id="cb32-2"><a href="exponential-smoothing.html#cb32-2" tabindex="-1"></a><span class="fu">summary</span>(LDES.Steel)</span></code></pre></div>
<pre><code>## 
## Forecast method: Damped Holt&#39;s method
## 
## Model Information:
## Damped Holt&#39;s method 
## 
## Call:
##  holt(y = SteelShp, h = 24, damped = TRUE, initial = &quot;optimal&quot;) 
## 
##   Smoothing parameters:
##     alpha = 0.4202 
##     beta  = 1e-04 
##     phi   = 0.9083 
## 
##   Initial states:
##     l = 6692.5352 
##     b = -54.4181 
## 
##   sigma:  472.702
## 
##      AIC     AICc      BIC 
## 1627.468 1628.412 1642.854 
## 
## Error measures:
##                    ME     RMSE     MAE        MPE     MAPE
## Training set 8.669068 460.2275 367.178 -0.2689588 5.765085
##                  MASE        ACF1
## Training set 0.836147 -0.02936686
## 
## Forecasts:
##          Point Forecast    Lo 80    Hi 80    Lo 95    Hi 95
## Jan 1992       6504.538 5898.746 7110.330 5578.059 7431.017
## Feb 1992       6504.482 5847.350 7161.614 5499.485 7509.479
## Mar 1992       6504.432 5799.671 7209.192 5426.594 7582.269
## Apr 1992       6504.386 5755.003 7253.768 5358.304 7650.467
## May 1992       6504.344 5712.838 7295.850 5293.839 7714.849
## Jun 1992       6504.306 5672.796 7335.817 5232.621 7775.992
## Jul 1992       6504.272 5634.585 7373.958 5174.201 7834.342
## Aug 1992       6504.241 5597.976 7410.505 5118.229 7890.252
## Sep 1992       6504.212 5562.783 7445.642 5064.420 7944.005
## Oct 1992       6504.187 5528.852 7479.521 5012.541 7995.832
## Nov 1992       6504.163 5496.057 7512.269 4962.398 8045.928
## Dec 1992       6504.142 5464.292 7543.992 4913.829 8094.455
## Jan 1993       6504.123 5433.465 7574.780 4866.693 8141.552
## Feb 1993       6504.105 5403.498 7604.712 4820.871 8187.339
## Mar 1993       6504.089 5374.322 7633.856 4776.260 8231.919
## Apr 1993       6504.075 5345.879 7662.271 4732.767 8275.383
## May 1993       6504.062 5318.115 7690.008 4690.313 8317.810
## Jun 1993       6504.050 5290.985 7717.114 4648.827 8359.272
## Jul 1993       6504.039 5264.447 7743.631 4608.247 8399.831
## Aug 1993       6504.029 5238.464 7769.594 4568.514 8439.544
## Sep 1993       6504.020 5213.002 7795.038 4529.578 8478.462
## Oct 1993       6504.012 5188.032 7819.992 4491.394 8516.630
## Nov 1993       6504.005 5163.526 7844.483 4453.919 8554.090
## Dec 1993       6503.998 5139.459 7868.537 4417.116 8590.880</code></pre>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="exponential-smoothing.html#cb34-1" tabindex="-1"></a><span class="fu">autoplot</span>(LDES.Steel)<span class="sc">+</span></span>
<span id="cb34-2"><a href="exponential-smoothing.html#cb34-2" tabindex="-1"></a>  <span class="fu">autolayer</span>(<span class="fu">fitted</span>(LDES.Steel),<span class="at">series=</span><span class="st">&quot;Fitted&quot;</span>)<span class="sc">+</span><span class="fu">labs</span>(<span class="at">title=</span><span class="st">&quot;US Steel Shipment Linear Damped ESM Forecast&quot;</span>) <span class="sc">+</span> <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">1992</span>,<span class="at">color=</span><span class="st">&quot;orange&quot;</span>,<span class="at">linetype=</span><span class="st">&quot;dashed&quot;</span>)</span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/damped%20trend-1.png" width="672" /></p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="exponential-smoothing.html#cb35-1" tabindex="-1"></a>LDES.USAir <span class="ot">&lt;-</span> <span class="fu">holt</span>(Passenger, <span class="at">initial =</span> <span class="st">&quot;optimal&quot;</span>, <span class="at">h =</span> <span class="dv">24</span>, <span class="at">damped =</span> <span class="cn">TRUE</span>)</span>
<span id="cb35-2"><a href="exponential-smoothing.html#cb35-2" tabindex="-1"></a><span class="fu">summary</span>(LDES.USAir)</span></code></pre></div>
<pre><code>## 
## Forecast method: Damped Holt&#39;s method
## 
## Model Information:
## Damped Holt&#39;s method 
## 
## Call:
##  holt(y = Passenger, h = 24, damped = TRUE, initial = &quot;optimal&quot;) 
## 
##   Smoothing parameters:
##     alpha = 0.5721 
##     beta  = 1e-04 
##     phi   = 0.8057 
## 
##   Initial states:
##     l = 36886.1093 
##     b = 527.1535 
## 
##   sigma:  4874.3
## 
##      AIC     AICc      BIC 
## 4906.527 4906.924 4926.862 
## 
## Error measures:
##                    ME     RMSE      MAE        MPE     MAPE
## Training set 196.2283 4818.336 3529.079 -0.2896149 7.191284
##                  MASE       ACF1
## Training set 1.326257 0.04535328
## 
## Forecasts:
##          Point Forecast    Lo 80    Hi 80    Lo 95    Hi 95
## Apr 2008       63673.96 57427.30 69920.63 54120.51 73227.42
## May 2008       63674.11 56477.18 70871.04 52667.35 74680.87
## Jun 2008       63674.23 55638.45 71710.01 51384.57 75963.89
## Jul 2008       63674.33 54879.22 72469.44 50223.37 77125.29
## Aug 2008       63674.41 54180.40 73168.41 49154.58 78194.23
## Sep 2008       63674.47 53529.54 73819.40 48159.13 79189.80
## Oct 2008       63674.52 52917.92 74431.12 47223.71 80125.32
## Nov 2008       63674.56 52339.20 75009.92 46338.63 81010.49
## Dec 2008       63674.59 51788.59 75560.59 45496.53 81852.66
## Jan 2009       63674.62 51262.36 76086.88 44691.70 82657.53
## Feb 2009       63674.64 50757.52 76591.76 43919.61 83429.67
## Mar 2009       63674.66 50271.67 77077.65 43176.55 84172.76
## Apr 2009       63674.67 49802.80 77546.54 42459.48 84889.86
## May 2009       63674.68 49349.27 78000.09 41765.85 85583.51
## Jun 2009       63674.69 48909.65 78439.73 41093.51 86255.87
## Jul 2009       63674.70 48482.74 78866.66 40440.60 86908.80
## Aug 2009       63674.70 48067.49 79281.91 39805.54 87543.87
## Sep 2009       63674.71 47663.01 79686.40 39186.93 88162.48
## Oct 2009       63674.71 47268.49 80080.93 38583.57 88765.85
## Nov 2009       63674.71 46883.24 80466.19 37994.37 89355.06
## Dec 2009       63674.72 46506.63 80842.80 37418.39 89931.04
## Jan 2010       63674.72 46138.10 81211.34 36854.78 90494.66
## Feb 2010       63674.72 45777.16 81572.28 36302.76 91046.68
## Mar 2010       63674.72 45423.35 81926.09 35761.66 91587.78</code></pre>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="exponential-smoothing.html#cb37-1" tabindex="-1"></a><span class="fu">autoplot</span>(LDES.USAir)<span class="sc">+</span></span>
<span id="cb37-2"><a href="exponential-smoothing.html#cb37-2" tabindex="-1"></a>  <span class="fu">autolayer</span>(<span class="fu">fitted</span>(LDES.USAir),<span class="at">series=</span><span class="st">&quot;Fitted&quot;</span>)<span class="sc">+</span><span class="fu">labs</span>(<span class="at">title=</span><span class="st">&quot;US Airline Passengers with Linear Damped ESM Forecast&quot;</span>) <span class="sc">+</span> <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="fl">2008.25</span>,<span class="at">color=</span><span class="st">&quot;orange&quot;</span>,<span class="at">linetype=</span><span class="st">&quot;dashed&quot;</span>)</span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/damped%20trend-2.png" width="672" /></p>
</div>
<div id="holt-winters" class="section level2 hasAnchor" number="3.3">
<h2><span class="header-section-number">3.3</span> Holt-Winters<a href="exponential-smoothing.html#holt-winters" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The Holt-Winters (HW) model has three components to it (level, trend and seasonality). Seasonality is an interesting component to model since we can have an additive seasonal component or a multiplicative seasonal component. Both models are shown below:</p>
<p>Additive HW
<span class="math display">\[\hat{Y}_{t+h}= L_{t}+hT_{t} + S_{t-p+h}\\
  L_{t} = \theta (Y_{t} - S_{t-p}) + (1-\theta)(L_{t-1}+T_{t-1})\\
  T_{t} = \gamma (L_{t}-L_{t-1}) + (1-\gamma) T_{t-1}\\
  S_{t} = \delta (Y_{t}-L_{t-1}-T_{t-1}) + (1-\delta) S_{t-p}\]</span></p>
<p>Multiplicative HW
<span class="math display">\[\hat{Y}_{t+h}= (L_{t}+hT_{t}) S_{t-p+h}\\
  L_{t} = \theta \frac{Y_{t}} {S_{t-p}} + (1-\theta)(L_{t-1}+T_{t-1})\\
  T_{t} = \gamma (L_{t}-L_{t-1}) + (1-\gamma) T_{t-1}\\
  S_{t} = \delta \frac{Y_{t}}{L_{t-1}+T_{t-1}} + (1-\delta) S_{t-p}\]</span></p>
<p>Where p is the frequency of the seasonality (i.e. how many “seasons” there are within one year).</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="exponential-smoothing.html#cb38-1" tabindex="-1"></a><span class="co"># Building a Holt-Winters ESM - US Airlines Data - Additive Seasonality</span></span>
<span id="cb38-2"><a href="exponential-smoothing.html#cb38-2" tabindex="-1"></a>HWES.USAir <span class="ot">&lt;-</span> <span class="fu">hw</span>(Passenger, <span class="at">seasonal =</span> <span class="st">&quot;additive&quot;</span>)</span>
<span id="cb38-3"><a href="exponential-smoothing.html#cb38-3" tabindex="-1"></a><span class="fu">summary</span>(HWES.USAir)</span></code></pre></div>
<pre><code>## 
## Forecast method: Holt-Winters&#39; additive method
## 
## Model Information:
## Holt-Winters&#39; additive method 
## 
## Call:
##  hw(y = Passenger, seasonal = &quot;additive&quot;) 
## 
##   Smoothing parameters:
##     alpha = 0.5967 
##     beta  = 1e-04 
##     gamma = 1e-04 
## 
##   Initial states:
##     l = 38384.1383 
##     b = 171.3139 
##     s = -1607.408 -2735.133 -266.9438 -4488.589 6259.346 6626.648
##            4166.006 1369.769 250.523 2806.828 -6741.171 -5639.874
## 
##   sigma:  1949.79
## 
##      AIC     AICc      BIC 
## 4515.651 4518.696 4573.265 
## 
## Error measures:
##                     ME     RMSE      MAE        MPE     MAPE
## Training set -84.80235 1877.214 1168.093 -0.2917412 2.495749
##                   MASE       ACF1
## Training set 0.4389788 0.06636172
## 
## Forecasts:
##          Point Forecast    Lo 80    Hi 80    Lo 95    Hi 95
## Apr 2008       65005.38 62506.62 67504.13 61183.86 68826.90
## May 2008       66294.00 63384.09 69203.92 61843.67 70744.34
## Jun 2008       69259.75 65989.86 72529.64 64258.88 74260.62
## Jul 2008       71890.05 68295.96 75484.15 66393.36 77386.74
## Aug 2008       71692.11 67800.64 75583.59 65740.62 77643.61
## Sep 2008       61113.61 56945.83 65281.39 54739.54 67487.68
## Oct 2008       65504.72 61077.76 69931.67 58734.27 72275.16
## Nov 2008       63206.01 58534.16 67877.87 56061.02 70351.00
## Dec 2008       64502.98 59598.36 69407.60 57002.01 72003.95
## Jan 2009       60640.36 55513.46 65767.26 52799.44 68481.28
## Feb 2009       59708.43 54368.43 65048.44 51541.60 67875.27
## Mar 2009       69425.67 63880.68 74970.66 60945.34 77906.01
## Apr 2009       67038.85 61296.05 72781.64 58255.99 75821.70
## May 2009       68327.47 62393.46 74261.49 59252.18 77402.76
## Jun 2009       71293.22 65173.90 77412.54 61934.53 80651.91
## Jul 2009       73923.52 67624.29 80222.75 64289.67 83557.37
## Aug 2009       73725.58 67251.38 80199.79 63824.14 83627.03
## Sep 2009       63147.08 56502.45 69791.72 52984.99 73309.17
## Oct 2009       67538.18 60727.34 74349.03 57121.89 77954.48
## Nov 2009       65239.48 58266.32 72212.64 54574.96 75904.01
## Dec 2009       66536.45 59404.62 73668.27 55629.26 77443.63
## Jan 2010       62673.83 55386.73 69960.92 51529.18 73818.47
## Feb 2010       61741.90 54302.73 69181.07 50364.67 73119.13
## Mar 2010       71459.14 63870.89 79047.39 59853.92 83064.36</code></pre>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="exponential-smoothing.html#cb40-1" tabindex="-1"></a><span class="fu">autoplot</span>(HWES.USAir)<span class="sc">+</span></span>
<span id="cb40-2"><a href="exponential-smoothing.html#cb40-2" tabindex="-1"></a>  <span class="fu">autolayer</span>(<span class="fu">fitted</span>(HWES.USAir),<span class="at">series=</span><span class="st">&quot;Fitted&quot;</span>)<span class="sc">+</span><span class="fu">ylab</span>(<span class="st">&quot;Airlines Passengers&quot;</span>)<span class="sc">+</span> <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="fl">2008.25</span>,<span class="at">color=</span><span class="st">&quot;orange&quot;</span>,<span class="at">linetype=</span><span class="st">&quot;dashed&quot;</span>)</span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/Seasonal%20models-1.png" width="672" /></p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="exponential-smoothing.html#cb41-1" tabindex="-1"></a><span class="co"># Building a Holt-Winters ESM - US Airlines Data - Multiplicative Seasonality</span></span>
<span id="cb41-2"><a href="exponential-smoothing.html#cb41-2" tabindex="-1"></a>HWES.USAir <span class="ot">&lt;-</span> <span class="fu">hw</span>(Passenger, <span class="at">seasonal =</span> <span class="st">&quot;multiplicative&quot;</span>)</span>
<span id="cb41-3"><a href="exponential-smoothing.html#cb41-3" tabindex="-1"></a><span class="fu">summary</span>(HWES.USAir)</span></code></pre></div>
<pre><code>## 
## Forecast method: Holt-Winters&#39; multiplicative method
## 
## Model Information:
## Holt-Winters&#39; multiplicative method 
## 
## Call:
##  hw(y = Passenger, seasonal = &quot;multiplicative&quot;) 
## 
##   Smoothing parameters:
##     alpha = 0.4372 
##     beta  = 1e-04 
##     gamma = 0.2075 
## 
##   Initial states:
##     l = 38293.1221 
##     b = 173.9926 
##     s = 0.9658 0.962 1.0064 0.9745 1.1393 1.0801
##            1.0368 0.9994 1.0012 1.0401 0.8799 0.9146
## 
##   sigma:  0.0381
## 
##      AIC     AICc      BIC 
## 4504.228 4507.272 4561.842 
## 
## Error measures:
##                     ME     RMSE      MAE       MPE     MAPE
## Training set -113.1889 1848.797 1090.105 -0.383246 2.303162
##                   MASE      ACF1
## Training set 0.4096702 0.1713934
## 
## Forecasts:
##          Point Forecast    Lo 80    Hi 80    Lo 95    Hi 95
## Apr 2008       65528.49 62329.64 68727.34 60636.28 70420.70
## May 2008       66821.29 63262.13 70380.46 61378.02 72264.57
## Jun 2008       70075.52 66056.65 74094.40 63929.19 76221.86
## Jul 2008       73144.30 68671.62 77616.98 66303.93 79984.68
## Aug 2008       71313.29 66698.66 75927.92 64255.83 78370.76
## Sep 2008       58655.19 54662.55 62647.83 52548.97 64761.40
## Oct 2008       64544.10 59944.79 69143.41 57510.06 71578.13
## Nov 2008       62554.65 57906.98 67202.32 55446.66 69662.65
## Dec 2008       63629.25 58716.73 68541.77 56116.20 71142.30
## Jan 2009       59379.95 54629.79 64130.10 52115.21 66644.68
## Feb 2009       57852.76 53069.42 62636.10 50537.28 65168.25
## Mar 2009       70682.78 64655.56 76710.00 61464.94 79900.62
## Apr 2009       67606.25 61473.18 73739.32 58226.52 76985.97
## May 2009       68934.51 62519.04 75349.97 59122.89 78746.12
## Jun 2009       72285.87 65393.58 79178.16 61745.02 82826.72
## Jul 2009       75445.45 68084.46 82806.44 64187.79 86703.11
## Aug 2009       73551.02 66215.90 80886.14 62332.92 84769.12
## Sep 2009       60490.96 54330.83 66651.08 51069.86 69912.06
## Oct 2009       66558.97 59644.04 73473.89 55983.50 77134.43
## Nov 2009       64502.39 57671.58 71333.21 54055.56 74949.22
## Dec 2009       65605.36 58528.93 72681.80 54782.90 76427.83
## Jan 2010       61219.37 54498.44 67940.31 50940.59 71498.16
## Feb 2010       59640.30 52980.57 66300.04 49455.12 69825.49
## Mar 2010       72861.19 64590.90 81131.47 60212.88 85509.49</code></pre>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="exponential-smoothing.html#cb43-1" tabindex="-1"></a><span class="fu">autoplot</span>(HWES.USAir)<span class="sc">+</span></span>
<span id="cb43-2"><a href="exponential-smoothing.html#cb43-2" tabindex="-1"></a>  <span class="fu">autolayer</span>(<span class="fu">fitted</span>(HWES.USAir),<span class="at">series=</span><span class="st">&quot;Fitted&quot;</span>)<span class="sc">+</span><span class="fu">ylab</span>(<span class="st">&quot;Airlines Passengers&quot;</span>)<span class="sc">+</span> <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="fl">2008.25</span>,<span class="at">color=</span><span class="st">&quot;orange&quot;</span>,<span class="at">linetype=</span><span class="st">&quot;dashed&quot;</span>)</span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/Seasonal%20models-2.png" width="672" /></p>
</div>
<div id="evaluating-forecasts" class="section level2 hasAnchor" number="3.4">
<h2><span class="header-section-number">3.4</span> Evaluating forecasts<a href="exponential-smoothing.html#evaluating-forecasts" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>In order to get a better idea of the forecasting properties of the algorithms, it is best to divide your data into a training data set and a test data set. Time series is VERY different than other algorithms in which you have done. The test data set should come at the END of the time series (to truly see how well you can forecast!). An example code is shown below in which the last 12 observations are used as the test data set:</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="exponential-smoothing.html#cb44-1" tabindex="-1"></a><span class="co"># Create training set from overall Airlines Data</span></span>
<span id="cb44-2"><a href="exponential-smoothing.html#cb44-2" tabindex="-1"></a>training<span class="ot">=</span><span class="fu">subset</span>(Passenger,<span class="at">end=</span><span class="fu">length</span>(Passenger)<span class="sc">-</span><span class="dv">12</span>)</span>
<span id="cb44-3"><a href="exponential-smoothing.html#cb44-3" tabindex="-1"></a></span>
<span id="cb44-4"><a href="exponential-smoothing.html#cb44-4" tabindex="-1"></a><span class="co"># Create test set from overall Airlines Data</span></span>
<span id="cb44-5"><a href="exponential-smoothing.html#cb44-5" tabindex="-1"></a>test<span class="ot">=</span><span class="fu">subset</span>(Passenger,<span class="at">start=</span><span class="fu">length</span>(Passenger)<span class="sc">-</span><span class="dv">11</span>)</span>
<span id="cb44-6"><a href="exponential-smoothing.html#cb44-6" tabindex="-1"></a></span>
<span id="cb44-7"><a href="exponential-smoothing.html#cb44-7" tabindex="-1"></a><span class="co"># Fit Holt-Winters ESM (multiplicative seasonality) on training data</span></span>
<span id="cb44-8"><a href="exponential-smoothing.html#cb44-8" tabindex="-1"></a>HWES.USAir.train <span class="ot">&lt;-</span> <span class="fu">hw</span>(training, <span class="at">seasonal =</span> <span class="st">&quot;multiplicative&quot;</span>,<span class="at">initial=</span><span class="st">&#39;optimal&#39;</span>,<span class="at">h=</span><span class="dv">12</span>)</span>
<span id="cb44-9"><a href="exponential-smoothing.html#cb44-9" tabindex="-1"></a></span>
<span id="cb44-10"><a href="exponential-smoothing.html#cb44-10" tabindex="-1"></a></span>
<span id="cb44-11"><a href="exponential-smoothing.html#cb44-11" tabindex="-1"></a><span class="co"># Calculate prediction errors from forecast</span></span>
<span id="cb44-12"><a href="exponential-smoothing.html#cb44-12" tabindex="-1"></a>error<span class="ot">=</span>test<span class="sc">-</span>HWES.USAir.train<span class="sc">$</span>mean</span>
<span id="cb44-13"><a href="exponential-smoothing.html#cb44-13" tabindex="-1"></a></span>
<span id="cb44-14"><a href="exponential-smoothing.html#cb44-14" tabindex="-1"></a><span class="co"># Calculate prediction error statistics (MAE and MAPE)</span></span>
<span id="cb44-15"><a href="exponential-smoothing.html#cb44-15" tabindex="-1"></a>MAE<span class="ot">=</span><span class="fu">mean</span>(<span class="fu">abs</span>(error))</span>
<span id="cb44-16"><a href="exponential-smoothing.html#cb44-16" tabindex="-1"></a>MAPE<span class="ot">=</span><span class="fu">mean</span>(<span class="fu">abs</span>(error)<span class="sc">/</span><span class="fu">abs</span>(test))</span>
<span id="cb44-17"><a href="exponential-smoothing.html#cb44-17" tabindex="-1"></a></span>
<span id="cb44-18"><a href="exponential-smoothing.html#cb44-18" tabindex="-1"></a>MAE</span></code></pre></div>
<pre><code>## [1] 1134.58</code></pre>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="exponential-smoothing.html#cb46-1" tabindex="-1"></a>MAPE</span></code></pre></div>
<pre><code>## [1] 0.01763593</code></pre>
</div>
<div id="ets" class="section level2 hasAnchor" number="3.5">
<h2><span class="header-section-number">3.5</span> ETS<a href="exponential-smoothing.html#ets" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>You can also allow the computer to search for the best model. The ETS (Error, Trend, Seasonality) algorithm will search for the best model and estimate the parameters. For the error term, we can have either an additive or multiplicative error structure. For the trend, we can have none, additive, multiplicative, damped additive or damped multiplicative . For the seasonal component, we can have none, additive or multiplicative (lots of choices!). An example of how to run this is:</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="exponential-smoothing.html#cb48-1" tabindex="-1"></a>ets.passenger<span class="ot">&lt;-</span><span class="fu">ets</span>(training)</span>
<span id="cb48-2"><a href="exponential-smoothing.html#cb48-2" tabindex="-1"></a><span class="fu">summary</span>(ets.passenger)</span></code></pre></div>
<pre><code>## ETS(M,Ad,M) 
## 
## Call:
##  ets(y = training) 
## 
##   Smoothing parameters:
##     alpha = 0.6485 
##     beta  = 1e-04 
##     gamma = 1e-04 
##     phi   = 0.9755 
## 
##   Initial states:
##     l = 38298.6991 
##     b = 99.6316 
##     s = 0.9696 0.9436 0.9968 0.919 1.1276 1.1289
##            1.0784 1.0223 1.0025 1.0531 0.8681 0.89
## 
##   sigma:  0.0369
## 
##      AIC     AICc      BIC 
## 4225.929 4229.567 4285.918 
## 
## Training set error measures:
##                    ME     RMSE      MAE       MPE    MAPE
## Training set 157.1888 1747.817 1043.596 0.1980283 2.19083
##                 MASE        ACF1
## Training set 0.38762 0.008869188</code></pre>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb50-1"><a href="exponential-smoothing.html#cb50-1" tabindex="-1"></a>ets.forecast.passenger<span class="ot">&lt;-</span>ets.passenger<span class="sc">%&gt;%</span>forecast<span class="sc">::</span><span class="fu">forecast</span>(<span class="at">h=</span><span class="dv">12</span>)</span>
<span id="cb50-2"><a href="exponential-smoothing.html#cb50-2" tabindex="-1"></a>error<span class="ot">=</span><span class="fu">mean</span>(<span class="fu">abs</span>(test<span class="sc">-</span>ets.forecast.passenger<span class="sc">$</span>mean))</span>
<span id="cb50-3"><a href="exponential-smoothing.html#cb50-3" tabindex="-1"></a>error</span></code></pre></div>
<pre><code>## [1] 1153.042</code></pre>
</div>
<div id="python-code-for-exponential-smoothing" class="section level2 hasAnchor" number="3.6">
<h2><span class="header-section-number">3.6</span> Python Code for Exponential Smoothing<a href="exponential-smoothing.html#python-code-for-exponential-smoothing" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The following Python codes will produce exponential smoothing models. I do recommend that you take some time to understand some of the differences between the models fit in R versus Python.</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb52-1"><a href="exponential-smoothing.html#cb52-1" tabindex="-1"></a></span>
<span id="cb52-2"><a href="exponential-smoothing.html#cb52-2" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb52-3"><a href="exponential-smoothing.html#cb52-3" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb52-4"><a href="exponential-smoothing.html#cb52-4" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb52-5"><a href="exponential-smoothing.html#cb52-5" tabindex="-1"></a><span class="im">from</span> matplotlib <span class="im">import</span> pyplot</span>
<span id="cb52-6"><a href="exponential-smoothing.html#cb52-6" tabindex="-1"></a><span class="im">from</span> statsmodels.tsa.api <span class="im">import</span> ExponentialSmoothing, SimpleExpSmoothing, Holt</span>
<span id="cb52-7"><a href="exponential-smoothing.html#cb52-7" tabindex="-1"></a></span>
<span id="cb52-8"><a href="exponential-smoothing.html#cb52-8" tabindex="-1"></a>steel<span class="op">=</span>pd.read_csv(<span class="st">&quot;Q:</span><span class="ch">\\</span><span class="st">My Drive</span><span class="ch">\\</span><span class="st">Fall 2017 - Time Series</span><span class="ch">\\</span><span class="st">DataR</span><span class="ch">\\</span><span class="st">steel.csv&quot;</span>)</span>
<span id="cb52-9"><a href="exponential-smoothing.html#cb52-9" tabindex="-1"></a>df<span class="op">=</span>pd.date_range(start<span class="op">=</span><span class="st">&#39;1/1/1984&#39;</span>, end<span class="op">=</span><span class="st">&#39;12/1/1991&#39;</span>, freq<span class="op">=</span><span class="st">&#39;MS&#39;</span>)</span>
<span id="cb52-10"><a href="exponential-smoothing.html#cb52-10" tabindex="-1"></a>steel.index<span class="op">=</span>pd.to_datetime(df)</span>
<span id="cb52-11"><a href="exponential-smoothing.html#cb52-11" tabindex="-1"></a></span>
<span id="cb52-12"><a href="exponential-smoothing.html#cb52-12" tabindex="-1"></a>fit <span class="op">=</span> SimpleExpSmoothing(steel[<span class="st">&#39;steelshp&#39;</span>]).fit()</span>
<span id="cb52-13"><a href="exponential-smoothing.html#cb52-13" tabindex="-1"></a>fit.params[<span class="st">&#39;smoothing_level&#39;</span>]</span></code></pre></div>
<pre><code>## 0.42865253426712535</code></pre>
<div class="sourceCode" id="cb54"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb54-1"><a href="exponential-smoothing.html#cb54-1" tabindex="-1"></a>fcast <span class="op">=</span> fit.forecast(<span class="dv">24</span>)</span>
<span id="cb54-2"><a href="exponential-smoothing.html#cb54-2" tabindex="-1"></a>fcast</span></code></pre></div>
<pre><code>## 1992-01-01    6498.665388
## 1992-02-01    6498.665388
## 1992-03-01    6498.665388
## 1992-04-01    6498.665388
## 1992-05-01    6498.665388
## 1992-06-01    6498.665388
## 1992-07-01    6498.665388
## 1992-08-01    6498.665388
## 1992-09-01    6498.665388
## 1992-10-01    6498.665388
## 1992-11-01    6498.665388
## 1992-12-01    6498.665388
## 1993-01-01    6498.665388
## 1993-02-01    6498.665388
## 1993-03-01    6498.665388
## 1993-04-01    6498.665388
## 1993-05-01    6498.665388
## 1993-06-01    6498.665388
## 1993-07-01    6498.665388
## 1993-08-01    6498.665388
## 1993-09-01    6498.665388
## 1993-10-01    6498.665388
## 1993-11-01    6498.665388
## 1993-12-01    6498.665388
## Freq: MS, dtype: float64</code></pre>
<div class="sourceCode" id="cb56"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb56-1"><a href="exponential-smoothing.html#cb56-1" tabindex="-1"></a>plt.plot(steel[<span class="st">&quot;steelshp&quot;</span>],color<span class="op">=</span><span class="st">&quot;black&quot;</span>)</span>
<span id="cb56-2"><a href="exponential-smoothing.html#cb56-2" tabindex="-1"></a>plt.plot(fcast,color<span class="op">=</span><span class="st">&quot;blue&quot;</span>)</span>
<span id="cb56-3"><a href="exponential-smoothing.html#cb56-3" tabindex="-1"></a>plt.show()</span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/simple%20exponential%20smoothing-1.png" width="672" /></p>
<p>The Holt models in Python:</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb57-1"><a href="exponential-smoothing.html#cb57-1" tabindex="-1"></a></span>
<span id="cb57-2"><a href="exponential-smoothing.html#cb57-2" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb57-3"><a href="exponential-smoothing.html#cb57-3" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb57-4"><a href="exponential-smoothing.html#cb57-4" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb57-5"><a href="exponential-smoothing.html#cb57-5" tabindex="-1"></a><span class="im">from</span> matplotlib <span class="im">import</span> pyplot</span>
<span id="cb57-6"><a href="exponential-smoothing.html#cb57-6" tabindex="-1"></a><span class="im">from</span> statsmodels.tsa.api <span class="im">import</span> ExponentialSmoothing, SimpleExpSmoothing, Holt</span>
<span id="cb57-7"><a href="exponential-smoothing.html#cb57-7" tabindex="-1"></a></span>
<span id="cb57-8"><a href="exponential-smoothing.html#cb57-8" tabindex="-1"></a>steel<span class="op">=</span>pd.read_csv(<span class="st">&quot;Q:</span><span class="ch">\\</span><span class="st">My Drive</span><span class="ch">\\</span><span class="st">Fall 2017 - Time Series</span><span class="ch">\\</span><span class="st">DataR</span><span class="ch">\\</span><span class="st">steel.csv&quot;</span>)</span>
<span id="cb57-9"><a href="exponential-smoothing.html#cb57-9" tabindex="-1"></a>df<span class="op">=</span>pd.date_range(start<span class="op">=</span><span class="st">&#39;1/1/1984&#39;</span>, end<span class="op">=</span><span class="st">&#39;12/1/1991&#39;</span>, freq<span class="op">=</span><span class="st">&#39;MS&#39;</span>)</span>
<span id="cb57-10"><a href="exponential-smoothing.html#cb57-10" tabindex="-1"></a>steel.index<span class="op">=</span>pd.to_datetime(df)</span>
<span id="cb57-11"><a href="exponential-smoothing.html#cb57-11" tabindex="-1"></a></span>
<span id="cb57-12"><a href="exponential-smoothing.html#cb57-12" tabindex="-1"></a>fit1 <span class="op">=</span> Holt(steel[<span class="st">&#39;steelshp&#39;</span>]).fit()</span>
<span id="cb57-13"><a href="exponential-smoothing.html#cb57-13" tabindex="-1"></a>fit1.summary()</span></code></pre></div>
<table class="simpletable">
<caption>Holt Model Results</caption>
<tr>
  <th>Dep. Variable:</th>    <td>steelshp</td> <th>  No. Observations:  </th>        <td>96</td>       
</tr>
<tr>
  <th>Model:</th>              <td>Holt</td>   <th>  SSE                </th>   <td>21299746.384</td>  
</tr>
<tr>
  <th>Optimized:</th>          <td>True</td>   <th>  AIC                </th>     <td>1189.746</td>    
</tr>
<tr>
  <th>Trend:</th>            <td>Additive</td> <th>  BIC                </th>     <td>1200.004</td>    
</tr>
<tr>
  <th>Seasonal:</th>           <td>None</td>   <th>  AICC               </th>     <td>1190.690</td>    
</tr>
<tr>
  <th>Seasonal Periods:</th>   <td>None</td>   <th>  Date:              </th> <td>Thu, 07 Sep 2023</td>
</tr>
<tr>
  <th>Box-Cox:</th>            <td>False</td>  <th>  Time:              </th>     <td>23:17:38</td>    
</tr>
<tr>
  <th>Box-Cox Coeff.:</th>     <td>None</td>   <th>                     </th>         <td> </td>       
</tr>
</table>
<table class="simpletable">
<tr>
         <td></td>                 <th>coeff</th>                <th>code</th>               <th>optimized</th>     
</tr>
<tr>
  <th>smoothing_level</th> <td>           0.5325556</td> <td>               alpha</td> <td>                True</td>
</tr>
<tr>
  <th>smoothing_trend</th> <td>           0.0501636</td> <td>                beta</td> <td>                True</td>
</tr>
<tr>
  <th>initial_level</th>   <td>           5994.5445</td> <td>                 l.0</td> <td>                True</td>
</tr>
<tr>
  <th>initial_trend</th>   <td>          -0.5416928</td> <td>                 b.0</td> <td>                True</td>
</tr>
</table>
<div class="sourceCode" id="cb58"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb58-1"><a href="exponential-smoothing.html#cb58-1" tabindex="-1"></a>fcast1 <span class="op">=</span> fit1.forecast(<span class="dv">24</span>)</span>
<span id="cb58-2"><a href="exponential-smoothing.html#cb58-2" tabindex="-1"></a>fcast1</span></code></pre></div>
<pre><code>## 1992-01-01    6405.763623
## 1992-02-01    6388.350856
## 1992-03-01    6370.938089
## 1992-04-01    6353.525323
## 1992-05-01    6336.112556
## 1992-06-01    6318.699789
## 1992-07-01    6301.287022
## 1992-08-01    6283.874255
## 1992-09-01    6266.461488
## 1992-10-01    6249.048721
## 1992-11-01    6231.635954
## 1992-12-01    6214.223188
## 1993-01-01    6196.810421
## 1993-02-01    6179.397654
## 1993-03-01    6161.984887
## 1993-04-01    6144.572120
## 1993-05-01    6127.159353
## 1993-06-01    6109.746586
## 1993-07-01    6092.333820
## 1993-08-01    6074.921053
## 1993-09-01    6057.508286
## 1993-10-01    6040.095519
## 1993-11-01    6022.682752
## 1993-12-01    6005.269985
## Freq: MS, dtype: float64</code></pre>
<div class="sourceCode" id="cb60"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb60-1"><a href="exponential-smoothing.html#cb60-1" tabindex="-1"></a>fit2 <span class="op">=</span> Holt(steel[<span class="st">&#39;steelshp&#39;</span>],exponential<span class="op">=</span><span class="va">True</span>).fit()</span></code></pre></div>
<pre><code>## C:\PROGRA~3\ANACON~1\envs\R_Env2\lib\site-packages\statsmodels\tsa\holtwinters\model.py:915: ConvergenceWarning: Optimization failed to converge. Check mle_retvals.
##   warnings.warn(</code></pre>
<div class="sourceCode" id="cb62"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb62-1"><a href="exponential-smoothing.html#cb62-1" tabindex="-1"></a>fit2.summary()</span></code></pre></div>
<table class="simpletable">
<caption>Holt Model Results</caption>
<tr>
  <th>Dep. Variable:</th>       <td>steelshp</td>    <th>  No. Observations:  </th>        <td>96</td>       
</tr>
<tr>
  <th>Model:</th>                 <td>Holt</td>      <th>  SSE                </th>   <td>22718462.013</td>  
</tr>
<tr>
  <th>Optimized:</th>             <td>True</td>      <th>  AIC                </th>     <td>1195.937</td>    
</tr>
<tr>
  <th>Trend:</th>            <td>Multiplicative</td> <th>  BIC                </th>     <td>1206.194</td>    
</tr>
<tr>
  <th>Seasonal:</th>              <td>None</td>      <th>  AICC               </th>     <td>1196.880</td>    
</tr>
<tr>
  <th>Seasonal Periods:</th>      <td>None</td>      <th>  Date:              </th> <td>Thu, 07 Sep 2023</td>
</tr>
<tr>
  <th>Box-Cox:</th>               <td>False</td>     <th>  Time:              </th>     <td>23:17:38</td>    
</tr>
<tr>
  <th>Box-Cox Coeff.:</th>        <td>None</td>      <th>                     </th>         <td> </td>       
</tr>
</table>
<table class="simpletable">
<tr>
         <td></td>                 <th>coeff</th>                <th>code</th>               <th>optimized</th>     
</tr>
<tr>
  <th>smoothing_level</th> <td>           0.5471429</td> <td>               alpha</td> <td>                True</td>
</tr>
<tr>
  <th>smoothing_trend</th> <td>           0.0705991</td> <td>                beta</td> <td>                True</td>
</tr>
<tr>
  <th>initial_level</th>   <td>           5980.0000</td> <td>                 l.0</td> <td>                True</td>
</tr>
<tr>
  <th>initial_trend</th>   <td>           1.0284281</td> <td>                 b.0</td> <td>                True</td>
</tr>
</table>
<div class="sourceCode" id="cb63"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb63-1"><a href="exponential-smoothing.html#cb63-1" tabindex="-1"></a>fcast2 <span class="op">=</span> fit2.forecast(<span class="dv">24</span>)</span>
<span id="cb63-2"><a href="exponential-smoothing.html#cb63-2" tabindex="-1"></a>fcast2</span></code></pre></div>
<pre><code>## 1992-01-01    6398.185756
## 1992-02-01    6378.947353
## 1992-03-01    6359.766797
## 1992-04-01    6340.643915
## 1992-05-01    6321.578532
## 1992-06-01    6302.570476
## 1992-07-01    6283.619574
## 1992-08-01    6264.725655
## 1992-09-01    6245.888547
## 1992-10-01    6227.108080
## 1992-11-01    6208.384083
## 1992-12-01    6189.716386
## 1993-01-01    6171.104820
## 1993-02-01    6152.549216
## 1993-03-01    6134.049406
## 1993-04-01    6115.605223
## 1993-05-01    6097.216498
## 1993-06-01    6078.883066
## 1993-07-01    6060.604759
## 1993-08-01    6042.381413
## 1993-09-01    6024.212861
## 1993-10-01    6006.098940
## 1993-11-01    5988.039485
## 1993-12-01    5970.034332
## Freq: MS, dtype: float64</code></pre>
<div class="sourceCode" id="cb65"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb65-1"><a href="exponential-smoothing.html#cb65-1" tabindex="-1"></a>fit3 <span class="op">=</span> Holt(steel[<span class="st">&#39;steelshp&#39;</span>],damped<span class="op">=</span><span class="va">True</span>).fit()</span></code></pre></div>
<pre><code>## &lt;string&gt;:1: FutureWarning: the &#39;damped&#39;&#39; keyword is deprecated, use &#39;damped_trend&#39; instead</code></pre>
<div class="sourceCode" id="cb67"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb67-1"><a href="exponential-smoothing.html#cb67-1" tabindex="-1"></a>fit3.summary()</span></code></pre></div>
<table class="simpletable">
<caption>Holt Model Results</caption>
<tr>
  <th>Dep. Variable:</th>    <td>steelshp</td> <th>  No. Observations:  </th>        <td>96</td>       
</tr>
<tr>
  <th>Model:</th>              <td>Holt</td>   <th>  SSE                </th>   <td>20886858.243</td>  
</tr>
<tr>
  <th>Optimized:</th>          <td>True</td>   <th>  AIC                </th>     <td>1189.867</td>    
</tr>
<tr>
  <th>Trend:</th>            <td>Additive</td> <th>  BIC                </th>     <td>1202.689</td>    
</tr>
<tr>
  <th>Seasonal:</th>           <td>None</td>   <th>  AICC               </th>     <td>1191.140</td>    
</tr>
<tr>
  <th>Seasonal Periods:</th>   <td>None</td>   <th>  Date:              </th> <td>Thu, 07 Sep 2023</td>
</tr>
<tr>
  <th>Box-Cox:</th>            <td>False</td>  <th>  Time:              </th>     <td>23:17:38</td>    
</tr>
<tr>
  <th>Box-Cox Coeff.:</th>     <td>None</td>   <th>                     </th>         <td> </td>       
</tr>
</table>
<table class="simpletable">
<tr>
         <td></td>                 <th>coeff</th>                <th>code</th>               <th>optimized</th>     
</tr>
<tr>
  <th>smoothing_level</th> <td>           0.4785874</td> <td>               alpha</td> <td>                True</td>
</tr>
<tr>
  <th>smoothing_trend</th> <td>           0.0409672</td> <td>                beta</td> <td>                True</td>
</tr>
<tr>
  <th>initial_level</th>   <td>           6062.3344</td> <td>                 l.0</td> <td>                True</td>
</tr>
<tr>
  <th>initial_trend</th>   <td>           23.225833</td> <td>                 b.0</td> <td>                True</td>
</tr>
<tr>
  <th>damping_trend</th>   <td>           0.9680594</td> <td>                 phi</td> <td>                True</td>
</tr>
</table>
<div class="sourceCode" id="cb68"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb68-1"><a href="exponential-smoothing.html#cb68-1" tabindex="-1"></a>fcast3 <span class="op">=</span> fit3.forecast(<span class="dv">24</span>)</span>
<span id="cb68-2"><a href="exponential-smoothing.html#cb68-2" tabindex="-1"></a>fcast3</span></code></pre></div>
<pre><code>## 1992-01-01    6451.860905
## 1992-02-01    6439.883672
## 1992-03-01    6428.289000
## 1992-04-01    6417.064667
## 1992-05-01    6406.198847
## 1992-06-01    6395.680086
## 1992-07-01    6385.497302
## 1992-08-01    6375.639761
## 1992-09-01    6366.097076
## 1992-10-01    6356.859189
## 1992-11-01    6347.916366
## 1992-12-01    6339.259182
## 1993-01-01    6330.878513
## 1993-02-01    6322.765528
## 1993-03-01    6314.911676
## 1993-04-01    6307.308681
## 1993-05-01    6299.948530
## 1993-06-01    6292.823466
## 1993-07-01    6285.925981
## 1993-08-01    6279.248806
## 1993-09-01    6272.784903
## 1993-10-01    6266.527461
## 1993-11-01    6260.469886
## 1993-12-01    6254.605793
## Freq: MS, dtype: float64</code></pre>
<div class="sourceCode" id="cb70"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb70-1"><a href="exponential-smoothing.html#cb70-1" tabindex="-1"></a>fit4 <span class="op">=</span> Holt(steel[<span class="st">&#39;steelshp&#39;</span>],exponential<span class="op">=</span><span class="va">True</span>,damped<span class="op">=</span><span class="va">True</span>).fit()</span></code></pre></div>
<pre><code>## C:\PROGRA~3\ANACON~1\envs\R_Env2\lib\site-packages\statsmodels\tsa\holtwinters\model.py:915: ConvergenceWarning: Optimization failed to converge. Check mle_retvals.
##   warnings.warn(</code></pre>
<div class="sourceCode" id="cb72"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb72-1"><a href="exponential-smoothing.html#cb72-1" tabindex="-1"></a>fit4.summary()</span></code></pre></div>
<table class="simpletable">
<caption>Holt Model Results</caption>
<tr>
  <th>Dep. Variable:</th>       <td>steelshp</td>    <th>  No. Observations:  </th>        <td>96</td>       
</tr>
<tr>
  <th>Model:</th>                 <td>Holt</td>      <th>  SSE                </th>   <td>22424181.268</td>  
</tr>
<tr>
  <th>Optimized:</th>             <td>True</td>      <th>  AIC                </th>     <td>1196.685</td>    
</tr>
<tr>
  <th>Trend:</th>            <td>Multiplicative</td> <th>  BIC                </th>     <td>1209.507</td>    
</tr>
<tr>
  <th>Seasonal:</th>              <td>None</td>      <th>  AICC               </th>     <td>1197.958</td>    
</tr>
<tr>
  <th>Seasonal Periods:</th>      <td>None</td>      <th>  Date:              </th> <td>Thu, 07 Sep 2023</td>
</tr>
<tr>
  <th>Box-Cox:</th>               <td>False</td>     <th>  Time:              </th>     <td>23:17:38</td>    
</tr>
<tr>
  <th>Box-Cox Coeff.:</th>        <td>None</td>      <th>                     </th>         <td> </td>       
</tr>
</table>
<table class="simpletable">
<tr>
         <td></td>                 <th>coeff</th>                <th>code</th>               <th>optimized</th>     
</tr>
<tr>
  <th>smoothing_level</th> <td>           0.5471429</td> <td>               alpha</td> <td>                True</td>
</tr>
<tr>
  <th>smoothing_trend</th> <td>           0.0529493</td> <td>                beta</td> <td>                True</td>
</tr>
<tr>
  <th>initial_level</th>   <td>           5980.0000</td> <td>                 l.0</td> <td>                True</td>
</tr>
<tr>
  <th>initial_trend</th>   <td>           1.0281399</td> <td>                 b.0</td> <td>                True</td>
</tr>
<tr>
  <th>damping_trend</th>   <td>           0.9900000</td> <td>                 phi</td> <td>                True</td>
</tr>
</table>
<div class="sourceCode" id="cb73"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb73-1"><a href="exponential-smoothing.html#cb73-1" tabindex="-1"></a>fcast4 <span class="op">=</span> fit4.forecast(<span class="dv">24</span>)</span>
<span id="cb73-2"><a href="exponential-smoothing.html#cb73-2" tabindex="-1"></a>fcast4</span></code></pre></div>
<pre><code>## 1992-01-01    6401.809327
## 1992-02-01    6388.238198
## 1992-03-01    6374.831120
## 1992-04-01    6361.585830
## 1992-05-01    6348.500102
## 1992-06-01    6335.571746
## 1992-07-01    6322.798608
## 1992-08-01    6310.178568
## 1992-09-01    6297.709542
## 1992-10-01    6285.389477
## 1992-11-01    6273.216353
## 1992-12-01    6261.188185
## 1993-01-01    6249.303016
## 1993-02-01    6237.558923
## 1993-03-01    6225.954011
## 1993-04-01    6214.486416
## 1993-05-01    6203.154304
## 1993-06-01    6191.955868
## 1993-07-01    6180.889331
## 1993-08-01    6169.952942
## 1993-09-01    6159.144978
## 1993-10-01    6148.463744
## 1993-11-01    6137.907569
## 1993-12-01    6127.474808
## Freq: MS, dtype: float64</code></pre>
<div class="sourceCode" id="cb75"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb75-1"><a href="exponential-smoothing.html#cb75-1" tabindex="-1"></a>ax<span class="op">=</span>steel.plot(color<span class="op">=</span><span class="st">&quot;black&quot;</span>,figsize<span class="op">=</span>(<span class="dv">12</span>,<span class="dv">8</span>))</span>
<span id="cb75-2"><a href="exponential-smoothing.html#cb75-2" tabindex="-1"></a>fcast1.plot(ax<span class="op">=</span>ax,color<span class="op">=</span><span class="st">&quot;blue&quot;</span>)</span>
<span id="cb75-3"><a href="exponential-smoothing.html#cb75-3" tabindex="-1"></a>fcast2.plot(ax<span class="op">=</span>ax,color<span class="op">=</span><span class="st">&quot;orange&quot;</span>)</span>
<span id="cb75-4"><a href="exponential-smoothing.html#cb75-4" tabindex="-1"></a>fcast3.plot(ax<span class="op">=</span>ax,color<span class="op">=</span><span class="st">&quot;purple&quot;</span>)</span>
<span id="cb75-5"><a href="exponential-smoothing.html#cb75-5" tabindex="-1"></a>fcast4.plot(ax<span class="op">=</span>ax,color<span class="op">=</span><span class="st">&quot;gray&quot;</span>)</span>
<span id="cb75-6"><a href="exponential-smoothing.html#cb75-6" tabindex="-1"></a>plt.show()</span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/holt%20models-3.png" width="1152" />
Seasonal models in Python:</p>
<div class="sourceCode" id="cb76"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb76-1"><a href="exponential-smoothing.html#cb76-1" tabindex="-1"></a></span>
<span id="cb76-2"><a href="exponential-smoothing.html#cb76-2" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb76-3"><a href="exponential-smoothing.html#cb76-3" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb76-4"><a href="exponential-smoothing.html#cb76-4" tabindex="-1"></a><span class="im">from</span> matplotlib <span class="im">import</span> pyplot</span>
<span id="cb76-5"><a href="exponential-smoothing.html#cb76-5" tabindex="-1"></a><span class="im">from</span> statsmodels.tsa.seasonal <span class="im">import</span> seasonal_decompose</span>
<span id="cb76-6"><a href="exponential-smoothing.html#cb76-6" tabindex="-1"></a><span class="im">from</span> statsmodels.tsa.seasonal <span class="im">import</span> STL</span>
<span id="cb76-7"><a href="exponential-smoothing.html#cb76-7" tabindex="-1"></a>usair_p<span class="op">=</span>pd.read_csv(<span class="st">&quot;Q:</span><span class="ch">\\</span><span class="st">My Drive</span><span class="ch">\\</span><span class="st">Fall 2017 - Time Series</span><span class="ch">\\</span><span class="st">DataR</span><span class="ch">\\</span><span class="st">usairlines.csv&quot;</span>)</span>
<span id="cb76-8"><a href="exponential-smoothing.html#cb76-8" tabindex="-1"></a>df<span class="op">=</span>pd.date_range(start<span class="op">=</span><span class="st">&#39;1/1/1990&#39;</span>, end<span class="op">=</span><span class="st">&#39;3/1/2008&#39;</span>, freq<span class="op">=</span><span class="st">&#39;MS&#39;</span>)</span>
<span id="cb76-9"><a href="exponential-smoothing.html#cb76-9" tabindex="-1"></a>usair_p.index<span class="op">=</span>pd.to_datetime(df)</span>
<span id="cb76-10"><a href="exponential-smoothing.html#cb76-10" tabindex="-1"></a></span>
<span id="cb76-11"><a href="exponential-smoothing.html#cb76-11" tabindex="-1"></a></span>
<span id="cb76-12"><a href="exponential-smoothing.html#cb76-12" tabindex="-1"></a>usair_p[<span class="st">&#39;HWES_ADD&#39;</span>] <span class="op">=</span> ExponentialSmoothing(usair_p[<span class="st">&#39;Passengers&#39;</span>],trend<span class="op">=</span><span class="st">&#39;add&#39;</span>,seasonal<span class="op">=</span><span class="st">&#39;add&#39;</span>,seasonal_periods<span class="op">=</span><span class="dv">12</span>).fit().fittedvalues</span></code></pre></div>
<pre><code>## C:\PROGRA~3\ANACON~1\envs\R_Env2\lib\site-packages\statsmodels\tsa\holtwinters\model.py:915: ConvergenceWarning: Optimization failed to converge. Check mle_retvals.
##   warnings.warn(</code></pre>
<div class="sourceCode" id="cb78"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb78-1"><a href="exponential-smoothing.html#cb78-1" tabindex="-1"></a>usair_p[<span class="st">&#39;HWES_MUL&#39;</span>] <span class="op">=</span> ExponentialSmoothing(usair_p[<span class="st">&#39;Passengers&#39;</span>],trend<span class="op">=</span><span class="st">&#39;mul&#39;</span>,seasonal<span class="op">=</span><span class="st">&#39;mul&#39;</span>,seasonal_periods<span class="op">=</span><span class="dv">12</span>).fit().fittedvalues</span></code></pre></div>
<pre><code>## C:\PROGRA~3\ANACON~1\envs\R_Env2\lib\site-packages\statsmodels\tsa\holtwinters\model.py:915: ConvergenceWarning: Optimization failed to converge. Check mle_retvals.
##   warnings.warn(</code></pre>
<div class="sourceCode" id="cb80"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb80-1"><a href="exponential-smoothing.html#cb80-1" tabindex="-1"></a>usair_p[[<span class="st">&#39;Passengers&#39;</span>,<span class="st">&#39;HWES_ADD&#39;</span>,<span class="st">&#39;HWES_MUL&#39;</span>]].plot(title<span class="op">=</span><span class="st">&#39;Holt Winters Exponential Smoothing: Additive and Multiplicative Seasonality&#39;</span>)</span>
<span id="cb80-2"><a href="exponential-smoothing.html#cb80-2" tabindex="-1"></a>plt.show()</span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/seasonal%20models-5.png" width="672" /></p>
<div class="sourceCode" id="cb81"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb81-1"><a href="exponential-smoothing.html#cb81-1" tabindex="-1"></a>fit1<span class="op">=</span>ExponentialSmoothing(usair_p[<span class="st">&#39;Passengers&#39;</span>],trend<span class="op">=</span><span class="st">&#39;add&#39;</span>,seasonal<span class="op">=</span><span class="st">&#39;mul&#39;</span>,seasonal_periods<span class="op">=</span><span class="dv">12</span>).fit()</span></code></pre></div>
<pre><code>## C:\PROGRA~3\ANACON~1\envs\R_Env2\lib\site-packages\statsmodels\tsa\holtwinters\model.py:915: ConvergenceWarning: Optimization failed to converge. Check mle_retvals.
##   warnings.warn(</code></pre>
<div class="sourceCode" id="cb83"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb83-1"><a href="exponential-smoothing.html#cb83-1" tabindex="-1"></a>fit1.summary()</span></code></pre></div>
<table class="simpletable">
<caption>ExponentialSmoothing Model Results</caption>
<tr>
  <th>Dep. Variable:</th>         <td>Passengers</td>      <th>  No. Observations:  </th>        <td>219</td>      
</tr>
<tr>
  <th>Model:</th>            <td>ExponentialSmoothing</td> <th>  SSE                </th>   <td>810065387.907</td> 
</tr>
<tr>
  <th>Optimized:</th>                <td>True</td>         <th>  AIC                </th>     <td>3344.058</td>    
</tr>
<tr>
  <th>Trend:</th>                  <td>Additive</td>       <th>  BIC                </th>     <td>3398.283</td>    
</tr>
<tr>
  <th>Seasonal:</th>            <td>Multiplicative</td>    <th>  AICC               </th>     <td>3347.478</td>    
</tr>
<tr>
  <th>Seasonal Periods:</th>          <td>12</td>          <th>  Date:              </th> <td>Thu, 07 Sep 2023</td>
</tr>
<tr>
  <th>Box-Cox:</th>                  <td>False</td>        <th>  Time:              </th>     <td>23:17:40</td>    
</tr>
<tr>
  <th>Box-Cox Coeff.:</th>           <td>None</td>         <th>                     </th>         <td> </td>       
</tr>
</table>
<table class="simpletable">
<tr>
           <td></td>                  <th>coeff</th>                <th>code</th>               <th>optimized</th>     
</tr>
<tr>
  <th>smoothing_level</th>    <td>           0.3939286</td> <td>               alpha</td> <td>                True</td>
</tr>
<tr>
  <th>smoothing_trend</th>    <td>           0.0218849</td> <td>                beta</td> <td>                True</td>
</tr>
<tr>
  <th>smoothing_seasonal</th> <td>           0.3030357</td> <td>               gamma</td> <td>                True</td>
</tr>
<tr>
  <th>initial_level</th>      <td>           38232.794</td> <td>                 l.0</td> <td>                True</td>
</tr>
<tr>
  <th>initial_trend</th>      <td>          -95.864899</td> <td>                 b.0</td> <td>                True</td>
</tr>
<tr>
  <th>initial_seasons.0</th>  <td>           0.8828055</td> <td>                 s.0</td> <td>                True</td>
</tr>
<tr>
  <th>initial_seasons.1</th>  <td>           0.8473624</td> <td>                 s.1</td> <td>                True</td>
</tr>
<tr>
  <th>initial_seasons.2</th>  <td>           1.0108916</td> <td>                 s.2</td> <td>                True</td>
</tr>
<tr>
  <th>initial_seasons.3</th>  <td>           0.9777503</td> <td>                 s.3</td> <td>                True</td>
</tr>
<tr>
  <th>initial_seasons.4</th>  <td>           1.0088677</td> <td>                 s.4</td> <td>                True</td>
</tr>
<tr>
  <th>initial_seasons.5</th>  <td>           1.0761260</td> <td>                 s.5</td> <td>                True</td>
</tr>
<tr>
  <th>initial_seasons.6</th>  <td>           1.1385855</td> <td>                 s.6</td> <td>                True</td>
</tr>
<tr>
  <th>initial_seasons.7</th>  <td>           1.1824059</td> <td>                 s.7</td> <td>                True</td>
</tr>
<tr>
  <th>initial_seasons.8</th>  <td>           0.9607449</td> <td>                 s.8</td> <td>                True</td>
</tr>
<tr>
  <th>initial_seasons.9</th>  <td>           1.0081718</td> <td>                 s.9</td> <td>                True</td>
</tr>
<tr>
  <th>initial_seasons.10</th> <td>           0.9385590</td> <td>                s.10</td> <td>                True</td>
</tr>
<tr>
  <th>initial_seasons.11</th> <td>           0.9677292</td> <td>                s.11</td> <td>                True</td>
</tr>
</table>
<div class="sourceCode" id="cb84"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb84-1"><a href="exponential-smoothing.html#cb84-1" tabindex="-1"></a>fit2<span class="op">=</span>ExponentialSmoothing(usair_p[<span class="st">&#39;Passengers&#39;</span>],trend<span class="op">=</span><span class="st">&#39;add&#39;</span>,seasonal<span class="op">=</span><span class="st">&#39;add&#39;</span>,seasonal_periods<span class="op">=</span><span class="dv">12</span>).fit()</span></code></pre></div>
<pre><code>## C:\PROGRA~3\ANACON~1\envs\R_Env2\lib\site-packages\statsmodels\tsa\holtwinters\model.py:915: ConvergenceWarning: Optimization failed to converge. Check mle_retvals.
##   warnings.warn(</code></pre>
<div class="sourceCode" id="cb86"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb86-1"><a href="exponential-smoothing.html#cb86-1" tabindex="-1"></a>fit2.summary()</span></code></pre></div>
<table class="simpletable">
<caption>ExponentialSmoothing Model Results</caption>
<tr>
  <th>Dep. Variable:</th>         <td>Passengers</td>      <th>  No. Observations:  </th>        <td>219</td>      
</tr>
<tr>
  <th>Model:</th>            <td>ExponentialSmoothing</td> <th>  SSE                </th>   <td>818443222.270</td> 
</tr>
<tr>
  <th>Optimized:</th>                <td>True</td>         <th>  AIC                </th>     <td>3346.312</td>    
</tr>
<tr>
  <th>Trend:</th>                  <td>Additive</td>       <th>  BIC                </th>     <td>3400.537</td>    
</tr>
<tr>
  <th>Seasonal:</th>               <td>Additive</td>       <th>  AICC               </th>     <td>3349.732</td>    
</tr>
<tr>
  <th>Seasonal Periods:</th>          <td>12</td>          <th>  Date:              </th> <td>Thu, 07 Sep 2023</td>
</tr>
<tr>
  <th>Box-Cox:</th>                  <td>False</td>        <th>  Time:              </th>     <td>23:17:40</td>    
</tr>
<tr>
  <th>Box-Cox Coeff.:</th>           <td>None</td>         <th>                     </th>         <td> </td>       
</tr>
</table>
<table class="simpletable">
<tr>
           <td></td>                  <th>coeff</th>                <th>code</th>               <th>optimized</th>     
</tr>
<tr>
  <th>smoothing_level</th>    <td>           0.3939286</td> <td>               alpha</td> <td>                True</td>
</tr>
<tr>
  <th>smoothing_trend</th>    <td>           0.0218849</td> <td>                beta</td> <td>                True</td>
</tr>
<tr>
  <th>smoothing_seasonal</th> <td>           0.3305844</td> <td>               gamma</td> <td>                True</td>
</tr>
<tr>
  <th>initial_level</th>      <td>           38232.794</td> <td>                 l.0</td> <td>                True</td>
</tr>
<tr>
  <th>initial_trend</th>      <td>          -95.864899</td> <td>                 b.0</td> <td>                True</td>
</tr>
<tr>
  <th>initial_seasons.0</th>  <td>          -4632.4028</td> <td>                 s.0</td> <td>                True</td>
</tr>
<tr>
  <th>initial_seasons.1</th>  <td>          -6032.6319</td> <td>                 s.1</td> <td>                True</td>
</tr>
<tr>
  <th>initial_seasons.2</th>  <td>           494.52431</td> <td>                 s.2</td> <td>                True</td>
</tr>
<tr>
  <th>initial_seasons.3</th>  <td>          -873.71528</td> <td>                 s.3</td> <td>                True</td>
</tr>
<tr>
  <th>initial_seasons.4</th>  <td>           368.01389</td> <td>                 s.4</td> <td>                True</td>
</tr>
<tr>
  <th>initial_seasons.5</th>  <td>           3047.9618</td> <td>                 s.5</td> <td>                True</td>
</tr>
<tr>
  <th>initial_seasons.6</th>  <td>           5402.8993</td> <td>                 s.6</td> <td>                True</td>
</tr>
<tr>
  <th>initial_seasons.7</th>  <td>           7100.5243</td> <td>                 s.7</td> <td>                True</td>
</tr>
<tr>
  <th>initial_seasons.8</th>  <td>          -1505.9653</td> <td>                 s.8</td> <td>                True</td>
</tr>
<tr>
  <th>initial_seasons.9</th>  <td>           325.04514</td> <td>                 s.9</td> <td>                True</td>
</tr>
<tr>
  <th>initial_seasons.10</th> <td>          -2405.4861</td> <td>                s.10</td> <td>                True</td>
</tr>
<tr>
  <th>initial_seasons.11</th> <td>          -1288.7674</td> <td>                s.11</td> <td>                True</td>
</tr>
</table>
<div class="sourceCode" id="cb87"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb87-1"><a href="exponential-smoothing.html#cb87-1" tabindex="-1"></a>fcast1<span class="op">=</span>fit1.forecast(<span class="dv">24</span>)</span>
<span id="cb87-2"><a href="exponential-smoothing.html#cb87-2" tabindex="-1"></a>fcast2<span class="op">=</span>fit2.forecast(<span class="dv">24</span>)</span>
<span id="cb87-3"><a href="exponential-smoothing.html#cb87-3" tabindex="-1"></a></span>
<span id="cb87-4"><a href="exponential-smoothing.html#cb87-4" tabindex="-1"></a>ax<span class="op">=</span>usair_p[<span class="st">&quot;Passengers&quot;</span>].plot(color<span class="op">=</span><span class="st">&quot;black&quot;</span>,figsize<span class="op">=</span>(<span class="dv">12</span>,<span class="dv">8</span>))</span>
<span id="cb87-5"><a href="exponential-smoothing.html#cb87-5" tabindex="-1"></a>fcast1.plot(ax<span class="op">=</span>ax,color<span class="op">=</span><span class="st">&quot;blue&quot;</span>)</span>
<span id="cb87-6"><a href="exponential-smoothing.html#cb87-6" tabindex="-1"></a>fcast2.plot(ax<span class="op">=</span>ax,color<span class="op">=</span><span class="st">&quot;orange&quot;</span>)</span>
<span id="cb87-7"><a href="exponential-smoothing.html#cb87-7" tabindex="-1"></a>plt.show()</span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/seasonal%20models-6.png" width="1152" />
Evaluating forecasts in Python (and setting aside training/validation data):</p>
<div class="sourceCode" id="cb88"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb88-1"><a href="exponential-smoothing.html#cb88-1" tabindex="-1"></a></span>
<span id="cb88-2"><a href="exponential-smoothing.html#cb88-2" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb88-3"><a href="exponential-smoothing.html#cb88-3" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb88-4"><a href="exponential-smoothing.html#cb88-4" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb88-5"><a href="exponential-smoothing.html#cb88-5" tabindex="-1"></a><span class="im">from</span> matplotlib <span class="im">import</span> pyplot</span>
<span id="cb88-6"><a href="exponential-smoothing.html#cb88-6" tabindex="-1"></a><span class="im">from</span> statsmodels.tsa.seasonal <span class="im">import</span> seasonal_decompose</span>
<span id="cb88-7"><a href="exponential-smoothing.html#cb88-7" tabindex="-1"></a><span class="im">from</span> statsmodels.tsa.seasonal <span class="im">import</span> STL</span>
<span id="cb88-8"><a href="exponential-smoothing.html#cb88-8" tabindex="-1"></a>usair_p<span class="op">=</span>pd.read_csv(<span class="st">&quot;Q:</span><span class="ch">\\</span><span class="st">My Drive</span><span class="ch">\\</span><span class="st">Fall 2017 - Time Series</span><span class="ch">\\</span><span class="st">DataR</span><span class="ch">\\</span><span class="st">usairlines.csv&quot;</span>)</span>
<span id="cb88-9"><a href="exponential-smoothing.html#cb88-9" tabindex="-1"></a>df<span class="op">=</span>pd.date_range(start<span class="op">=</span><span class="st">&#39;1/1/1990&#39;</span>, end<span class="op">=</span><span class="st">&#39;3/1/2008&#39;</span>, freq<span class="op">=</span><span class="st">&#39;MS&#39;</span>)</span>
<span id="cb88-10"><a href="exponential-smoothing.html#cb88-10" tabindex="-1"></a>usair_p.index<span class="op">=</span>pd.to_datetime(df)</span>
<span id="cb88-11"><a href="exponential-smoothing.html#cb88-11" tabindex="-1"></a></span>
<span id="cb88-12"><a href="exponential-smoothing.html#cb88-12" tabindex="-1"></a>train<span class="op">=</span>usair_p.iloc[:<span class="dv">207</span>]</span>
<span id="cb88-13"><a href="exponential-smoothing.html#cb88-13" tabindex="-1"></a>test<span class="op">=</span>usair_p.iloc[<span class="dv">207</span>:]</span>
<span id="cb88-14"><a href="exponential-smoothing.html#cb88-14" tabindex="-1"></a></span>
<span id="cb88-15"><a href="exponential-smoothing.html#cb88-15" tabindex="-1"></a>fit<span class="op">=</span>ExponentialSmoothing(train[<span class="st">&#39;Passengers&#39;</span>],trend<span class="op">=</span><span class="st">&#39;add&#39;</span>,seasonal<span class="op">=</span><span class="st">&#39;mul&#39;</span>,seasonal_periods<span class="op">=</span><span class="dv">12</span>).fit()</span></code></pre></div>
<pre><code>## C:\PROGRA~3\ANACON~1\envs\R_Env2\lib\site-packages\statsmodels\tsa\holtwinters\model.py:915: ConvergenceWarning: Optimization failed to converge. Check mle_retvals.
##   warnings.warn(</code></pre>
<div class="sourceCode" id="cb90"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb90-1"><a href="exponential-smoothing.html#cb90-1" tabindex="-1"></a>fcast<span class="op">=</span>fit.forecast(<span class="dv">12</span>)</span>
<span id="cb90-2"><a href="exponential-smoothing.html#cb90-2" tabindex="-1"></a>error<span class="op">=</span>test[<span class="st">&#39;Passengers&#39;</span>]<span class="op">-</span>fcast</span>
<span id="cb90-3"><a href="exponential-smoothing.html#cb90-3" tabindex="-1"></a>MAE<span class="op">=</span>np.mean(<span class="bu">abs</span>(error))</span>
<span id="cb90-4"><a href="exponential-smoothing.html#cb90-4" tabindex="-1"></a>MAE</span></code></pre></div>
<pre><code>## 1373.7628412264887</code></pre>
<div class="sourceCode" id="cb92"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb92-1"><a href="exponential-smoothing.html#cb92-1" tabindex="-1"></a>MAPE<span class="op">=</span>np.mean(<span class="bu">abs</span>(error)<span class="op">/</span>test[<span class="st">&#39;Passengers&#39;</span>])</span>
<span id="cb92-2"><a href="exponential-smoothing.html#cb92-2" tabindex="-1"></a>MAPE</span></code></pre></div>
<pre><code>## 0.02125707712076534</code></pre>
</div>
<div id="sas-code-for-exponential-smoothing-models" class="section level2 hasAnchor" number="3.7">
<h2><span class="header-section-number">3.7</span> SAS Code for Exponential Smoothing Models<a href="exponential-smoothing.html#sas-code-for-exponential-smoothing-models" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The following code is for Exponential Smoothing models in SAS.</p>
<p><em>Create library for data sets</em>
libname Time ‘Q:Drive - Time Series’;  
run;</p>
<p><em>SIMPLE EXPONENTIAL SMOOTHING MODEL</em></p>
<p><em>Create a simple exponential smoothing model</em>  </p>
<p>proc esm data=Time.Steel print=all plot=all lead=24;  
forecast steelshp / model=simple;  
run;  </p>
<p><em>Create a simple exponential smoothing model with ID statement</em>  </p>
<p>proc esm data=Time.USAirlines print=all plot=all lead=24;  
id date interval=month;  
forecast Passengers / model=simple;  
run;  </p>
<p><em>LINEAR TREND FOR EXPONENTIAL SMOOTHING</em>  </p>
<p><em>Double exponential smoothing</em>  </p>
<p>proc esm data=Time.Steel print=all plot=all lead=24;  
forecast steelshp / model=double;  
run;  </p>
<p><em>linear exponential smoothing</em>  </p>
<p>proc esm data=Time.Steel print=all plot=all lead=24;  
forecast steelshp / model=linear;  
run;  </p>
<p><em>damped trend exponential smoothing</em>  </p>
<p>proc esm data=Time.Steel print=all plot=all lead=24;  
forecast steelshp / model=damptrend;  
run;  </p>
<p><em>linear exponential smoothign with interval = month</em>  </p>
<p>proc esm data=Time.USAirlines print=all plot=all lead=24;  
id date interval=month;  
forecast Passengers / model=linear;  
run;  </p>
<p><em>SEASONAL EXPONENTIAL SMOOTHING MODEL</em>  </p>
<p><em>Additive seasonal exponential smoothing model</em>  </p>
<p>proc esm data=Time.USAirlines print=all plot=all  
seasonality=12 lead=24 outfor=test1;  
forecast Passengers / model=addseasonal;  
run;  </p>
<p><em>mulitplicative seasonal exponential smoothing model</em>  </p>
<p>proc esm data=Time.USAirlines print=all plot=all  
seasonality=12 lead=24;  
forecast Passengers / model=multseasonal;  
run;  </p>
<p><em>Winters additive exponential smoothing model (includes trend)</em>  </p>
<p>proc esm data=Time.USAirlines print=all plot=all  
seasonality=12 lead=24;  
forecast Passengers / model=addwinters;  
run;  </p>
<p><em>Winters multiplicative exponential smoothing model (includes trend) (Lead = 24)</em>  </p>
<p>proc esm data=Time.USAirlines print=all plot=all  
seasonality=12 lead=24;  
forecast Passengers / model=multwinters;  
run;  </p>
<p><em>Winters multiplicative exponential smoothing model (includes trend) Lead = 12</em>  </p>
<p>proc esm data=Time.USAirlines print=all plot=all lead=12  
back=12 seasonality=12;  
forecast Passengers / model=multwinters;  
run;  </p>
<p><em>EXPLORATION of SEASONAL EXPONENTIAL SMOOTHING MODEL</em>  </p>
<p><em>Winters multiplicative exponential smoothing model (includes trend) Lead = 12, uses outfor statement to output forecasts</em>  </p>
<p>proc esm data=Time.USAirlines print=all plot=all<br />
seasonality=12 lead=12 back=12 outfor=test;  
forecast Passengers / model=multwinters;  
run;  </p>
<p><em>calculate |error|/|actual value|</em>  </p>
<p>data test2;  
set test;  
if <em>TIMEID</em>&gt;207;  
abs_error=abs(error);  
abs_err_obs=abs_error/abs(actual);  
run;  </p>
<p><em>mean of |error|/|actual value| for this forecast</em>  </p>
<p>proc means data=test2 mean;  
var abs_error abs_err_obs;  
run;</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="introduction.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="arima.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/sjsimmo2/TimeSeries/edit/master/02-Exponential-Smoothing.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/sjsimmo2/TimeSeries/blob/master/02-Exponential-Smoothing.Rmd",
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
